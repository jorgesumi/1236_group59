task3() {

    # Function to compute the nth term of the sequence
    function term {
        n=$1
        echo $((a * n ** 2 + b * n + c))
    }

    # Function to check if a number is a factor of another
    function is_factor {
        num=$1
        factor=$2
        if ((num % factor == 0)); then
            echo "This term is a factor of $num."
        else
            echo "This term is not a factor of $num."
        fi
    }

    # Prompt the user for input
    read -p "Enter value of a: " a
    read -p "Enter value of b: " b
    read -p "Enter value of c: " c

    # Prompt the user for the task they want to perform
    echo "Enter 1 to find a limited number of terms"
    read -p "Enter 2 to find a term in a position and check if it's a factor: " option

    if ((option == 1)); then
        # Option 1: Find a limited number of terms of the sequence and print them in order
        read -p "Enter the number of terms to print: " num_terms
        product=1
        for ((n = 1; n <= num_terms; n++)); do
            t=$(term $n)
            product=$((product * t))
            echo $t
        done
        echo "Product of terms: $product"
    elif ((option == 2)); then
        # Option 2: Find a term in a position chosen by the user and determine whether this term is a factor of a number chosen also by the user
        read -p "Enter the position of the term to find: " pos
        t=$(term $pos)
        echo "The $pos term is $t"
        read -p "Enter a number to check if the term is a factor of it: " num
        is_factor $num $t
    else
        echo "Invalid option selected."
    fi

}

# Ask the user for their name
read -p "Please enter your name:" name

# Display a greeting message
echo "Hello, $name! Welcome to Bash."

while true; do
    # Display a menu with options
    echo "Please choose an option:"
    echo "T/t/1: Work with triangular numbers"
    echo "P/p/2: Work with products of two nonnegative even numbers in succession"
    echo "Q/q/3: Work with quadratic sequences"
    echo "E/e/4: Exit the program"

    # Read the user's choice
    read choice

    case $choice in
    [Tt1])
        # Display selected option
        echo "You have selected to work with triangular numbers in Task 1."
        # Perform Task 1
        task1
        ;;
    [Pp2])
        # Display selected option
        echo "You have selected to work with products of two nonnegative even numbers in succession in Task 2."
        # Perform Task 2
        task2
        ;;
    [Qq3])
        # Display selected option
        echo "You have selected to work with quadratic sequences in Task 3."
        # Perform Task 3
        task3
        ;;
    [Ee4])
        # Exit the program
        echo "Exiting the program."
        exit 0
        ;;
    *)
        # Handle invalid input
        echo "Invalid option selected. Please try again."
        ;;
    esac

    # Ask the user if they want to select another task or exit
    read -p "Do you want to select another task? (Y/y for yes, N/n key to exit)" continue_choice

    if [ $continue_choice != "Y" ] && [ $continue_choice != "y" ]; then
        # Exit the program
        echo "Exiting the program."
        exit 0
    fi
done
